package com.chengqj.dao;

import com.mongodb.MongoClient;
import com.mongodb.client.FindIterable;
import com.mongodb.client.MongoCollection;
import com.mongodb.client.MongoCursor;
import com.mongodb.client.MongoDatabase;
import org.bson.Document;

import java.util.ArrayList;
import java.util.List;

/**
 * Created by cheng on 2017/10/30.
 */
public class MongoDBJDBC {
    public static void main(String args[]) {
        try {
            // 连接到 mongodb 服务
            MongoClient mongoClient = new MongoClient("localhost", 27017);

            // 连接到数据库
            MongoDatabase mongoDatabase = mongoClient.getDatabase("runoob");
            System.out.println("Connect to database successfully");
            MongoCollection<Document> collection = mongoDatabase.getCollection("runoob");
            String value = "<p>主要修改修改deployerConfigContext.xml文件</p><p><span>1. &lt;!--</span><span style=\"font-family: 宋体\">将原有</span><span>attributeRepository</span><span style=\"font-family:宋体\">配置注释</span><span> --&gt;<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></p><p><span>&lt;!--</span></p><p><span>&lt;beanid=&quot;attributeRepository&quot;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>class=&quot;org.jasig.services.persondir.support.StubPersonAttributeDao&quot;&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;propertyname=&quot;backingMap&quot;&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;map&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;entrykey=&quot;uid&quot; value=&quot;uid&quot; /&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;entrykey=&quot;eduPersonAffiliation&quot; value=&quot;eduPersonAffiliation&quot;/&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;entrykey=&quot;groupMembership&quot; value=&quot;groupMembership&quot; /&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;/map&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;/property&gt;</span></p><p><span>&lt;/bean&gt;</span></p><p><span>--&gt;</span></p><p><span>&lt;!--</span><span style=\"font-family: 宋体\">新增</span><span>attributeRepository</span><span style=\"font-family:宋体\">配置</span><span>(</span><span style=\"font-family:宋体\">开始</span><span>) --&gt;</span></p><p><span>&lt;bean class=&quot;org.jasig.services.persondir.support.jdbc.SingleRowJdbcPersonAttributeDao&quot; id=&quot;attributeRepository&quot;&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;!-- </span><span style=\"font-family:宋体\">指定使用的数据源，此处</span><span>dataSource</span><span style=\"font-family:宋体\">是已配置好的数据源</span><span> --&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;constructor-arg index=&quot;0&quot; ref=&quot;dataSource&quot;/&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;!-- </span><span style=\"font-family:宋体\">从数据库中查询信息的</span><span>SQL</span><span style=\"font-family:宋体\">语句，通常只需要修改表名即可</span><span> --&gt;</span></p><p><span><span>&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;constructor-arg index=&quot;1&quot; value=&quot;SELECT user_id AS userID,user_type userType,PID,login_email loginEmail,user_name userName, cell_num cellNum ,tel_no telNo FROM user</span></p><p><span><span>&nbsp;</span>where {0}&quot;/&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;property name=&quot;queryAttributeMapping&quot;&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;map&gt;</span></p><p><span>&lt;!-- </span><span style=\"font-family: 宋体\">上述查询的参数，将</span><span>userName</span><span style=\"font-family:宋体\">替换为表中表示用户名的字段名称</span><span> --&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;entry key=&quot;username&quot; value=&quot;login_email&quot;/&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;/map&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;/property&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;property name=&quot;resultAttributeMapping&quot;&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;map&gt;</span></p><p><span>&lt;!-- </span><span style=\"font-family: 宋体\">需要返回给</span><span>Web</span><span style=\"font-family:宋体\">应用的其它信息，多个信息时可继续增加</span><span>entry</span><span style=\"font-family:宋体\">节点</span><span>--&gt;</span></p><p><span>&lt;!--key</span><span style=\"font-family: 宋体\">值为数据表中的字段名称，</span><span>value</span><span style=\"font-family:宋体\">值为</span><span>Client</span><span style=\"font-family:宋体\">端取值时的名称标识</span><span>--&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;entry key=&quot;userId&quot; value=&quot;userId&quot;/&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;entry key=&quot;userType&quot; value=&quot;userType&quot;/&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;entry key=&quot;PID&quot; value=&quot;PID&quot;/&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;entry key=&quot;loginEmail&quot; value=&quot;loginEmail&quot;/&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;entry key=&quot;userName&quot; value=&quot;userName&quot;/&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;entry key=&quot;cellNum&quot; value=&quot;cellNum&quot;/&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;entry key=&quot;telNo&quot; value=&quot;telNo&quot;/&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;/map&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;/property&gt;</span></p><p><span>&lt;/bean&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;!--</span><span style=\"font-family:宋体\">新增</span><span>attributeRepository</span><span style=\"font-family:宋体\">配置</span><span>(</span><span style=\"font-family:宋体\">结束</span><span>) --&gt;</span></p><p><span>&nbsp;</span></p><p><span>&lt;property name=&quot;registeredServices&quot;&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;list&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;bean class=&quot;org.jasig.cas.services.RegexRegisteredService&quot;&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;property name=&quot;id&quot; value=&quot;0&quot; /&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;property name=&quot;name&quot; value=&quot;HTTP and IMAP&quot; /&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;property name=&quot;description&quot; value=&quot;Allows HTTP(S) and IMAP(S) protocols&quot; /&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;property name=&quot;serviceId&quot; value=&quot;^(https?|imaps?)://.*&quot; /&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;property name=&quot;evaluationOrder&quot; value=&quot;10000001&quot; /&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;!-- &lt;property name=&quot;ignoreAttributes&quot; value=&quot;true&quot; /&gt;<span>&nbsp; </span>--&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style=\"color:red\"><span>&nbsp;</span>&lt;property name=&quot;allowedAttributes&quot;&gt; </span></span></p><p><span style=\"color:red\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;list&gt;</span></p><p><span style=\"color:red\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;value&gt;userId&lt;/value&gt;</span></p><p><span style=\"color:red\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;value&gt;userType&lt;/value&gt;</span></p><p><span style=\"color:red\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;value&gt;PID&lt;/value&gt;</span></p><p><span style=\"color:red\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;value&gt;loginEmail&lt;/value&gt;</span></p><p><span style=\"color:red\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;value&gt;userName&lt;/value&gt;</span></p><p><span style=\"color:red\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;value&gt;cellNum&lt;/value&gt;</span></p><p><span style=\"color:red\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;value&gt;telNo&lt;/value&gt;</span></p><p><span style=\"color:red\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;/list&gt;</span></p><p><span style=\"color:red\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;/property&gt;</span></p><p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;/bean&gt;</span></p><p><span style=\"font-family:宋体\">红色的为新增的</span></p><p><span>&nbsp;</span></p><p><span>&nbsp;</span></p><p><span style=\";font-family:&#39;Tahoma&#39;,sans-serif;color:#444444;background:white\">CASServer</span><span style=\";font-family:宋体;color:#444444;background:white\">要将额外的信息传递至</span><span style=\";font-family:&#39;Tahoma&#39;,sans-serif;color:#444444;background:white\">Client</span><span style=\";font-family:宋体;color:#444444;background:white\">端，还需要修改完成信息组装的文件</span><span style=\";font-family:&#39;Tahoma&#39;,sans-serif;color:#444444;background:white\">WEB-INF/view/jsp/protocol/2.0/casServiceValidationSuccess.jsp</span><span style=\";font-family:宋体;color:#444444;background:white\">。</span><span style=\";font-family:&#39;Tahoma&#39;,sans-serif;color:#444444;background:white\">casServiceValidationSuccess.jsp</span><span style=\";font-family:宋体;color:#444444;background:white\">负责组装包含用户信息的</span><span style=\";font-family:&#39;Tahoma&#39;,sans-serif;color:#444444;background:white\">XML</span><span style=\";font-family:宋体;color:#444444;background:white\">，因此修改部分是将需要传递的额外信息加入到它最终生成的</span><span style=\";font-family:&#39;Tahoma&#39;,sans-serif;color:#444444;background:white\">XML</span><span style=\";font-family:宋体;color:#444444;background:white\">文件之中。具体修改如下：</span></p><p><span style=\";font-family:&#39;Tahoma&#39;,sans-serif;color:#444444;background:white\">&nbsp;</span></p><p><span>&lt;%@ page session=&quot;false&quot; %&gt;</span></p><p><span>&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;</span></p><p><span>&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/functions&quot; prefix=&quot;fn&quot; %&gt;</span></p><p><span>&lt;cas:serviceResponse xmlns:cas=&#39;http://www.yale.edu/tp/cas&#39;&gt;</span></p><p><span><span>&nbsp;</span>&lt;cas:authenticationSuccess&gt;</span></p><p><span style=\"color:red\">&lt;cas:user&gt;${fn:escapeXml(assertion.chainedAuthentications[fn:length(assertion.chainedAuthentications)-1].principal.id)}&lt;/cas:user&gt;</span></p><p><span style=\"color:red\"><span>&nbsp; </span>&lt;c:if test=&quot;${fn:length(assertion.chainedAuthentications[fn:length(assertion.chainedAuthentications)-1].principal.attributes) &gt; 0}&quot;&gt;</span></p><p><span style=\"color:red\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;cas:attributes&gt;</span></p><p><span style=\"color:red\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;c:forEach var=&quot;attr&quot; items=&quot;${assertion.chainedAuthentications[fn:length(assertion.chainedAuthentications)-1].principal.attributes}&quot;&gt;</span></p><p><span style=\"color:red\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;cas:${fn:escapeXml(attr.key)}&gt;${fn:escapeXml(attr.value)}&lt;/cas:${fn:escapeXml(attr.key)}&gt;</span></p><p><span style=\"color:red\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;/c:forEach&gt;</span></p><p><span style=\"color:red\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;/cas:attributes&gt;</span></p><p><span style=\"color:red\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&lt;/c:if&gt;</span></p><p><span>&lt;c:if test=&quot;${not empty pgtIou}&quot;&gt;</span></p><p><span><span>&nbsp; </span>&lt;cas:proxyGrantingTicket&gt;${pgtIou}&lt;/cas:proxyGrantingTicket&gt;</span></p><p><span>&lt;/c:if&gt;</span></p><p><span>&lt;c:if test=&quot;${fn:length(assertion.chainedAuthentications) &gt; 1}&quot;&gt;</span></p><p><span>&lt;cas:proxies&gt;</span></p><p><span>&lt;c:forEach var=&quot;proxy&quot; items=&quot;${assertion.chainedAuthentications}&quot; varStatus=&quot;loopStatus&quot; begin=&quot;0&quot; end=&quot;${fn:length(assertion.chainedAuthentications)-2}&quot; step=&quot;1&quot;&gt;</span></p><p><span><span>&nbsp;&nbsp; </span>&lt;cas:proxy&gt;${fn:escapeXml(proxy.principal.id)}&lt;/cas:proxy&gt;</span></p><p><span>&lt;/c:forEach&gt;</span></p><p><span>&lt;/cas:proxies&gt;</span></p><p><span>&lt;/c:if&gt;</span></p><p><span><span>&nbsp;</span>&lt;/cas:authenticationSuccess&gt;</span></p><p><span>&lt;/cas:serviceResponse&gt;</span></p><p><span>&nbsp;</span></p><p><span style=\"font-family:宋体;color:red\">红色为新增部分</span></p><p><span style=\"color:red\">&nbsp;</span></p><p><span style=\"font-family:宋体;color:red\">客户端使用</span></p><p><span style=\"color:red\">Pom.xml</span><span style=\"font-family:宋体;color:red\">中引入</span></p><p style=\"text-align:left;text-autospace:none\"><span style=\"font-size:15px;font-family: Consolas;color:teal\">&lt;</span><span style=\"font-size:15px;font-family:Consolas;color:#3F7F7F\">dependency</span><span style=\"font-size:15px;font-family: Consolas;color:teal\">&gt;</span></p><p style=\"text-align:left;text-autospace:none\"><span style=\"font-size:15px;font-family: Consolas;color:black\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style=\"font-size:15px;font-family:Consolas;color:teal\">&lt;</span><span style=\"font-size:15px;font-family:Consolas;color:#3F7F7F\">groupId</span><span style=\"font-size:15px;font-family:Consolas;color:teal\">&gt;</span><span style=\"font-size:15px;font-family:Consolas;color:black\">org.jasig.cas.client</span><span style=\"font-size:15px;font-family:Consolas;color:teal\">&lt;/</span><span style=\"font-size:15px;font-family:Consolas;color:#3F7F7F\">groupId</span><span style=\"font-size:15px;font-family:Consolas;color:teal\">&gt;</span></p><p style=\"text-align:left;text-autospace:none\"><span style=\"font-size:15px;font-family: Consolas;color:black\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style=\"font-size:15px;font-family:Consolas;color:teal\">&lt;</span><span style=\"font-size:15px;font-family:Consolas;color:#3F7F7F\">artifactId</span><span style=\"font-size:15px;font-family:Consolas;color:teal\">&gt;</span><span style=\"text-decoration:underline;\"><span style=\"font-size:15px;font-family:Consolas;color:black\">cas</span></span><span style=\"font-size:15px;font-family:Consolas;color:black\">-client-core</span><span style=\"font-size:15px;font-family:Consolas;color:teal\">&lt;/</span><span style=\"font-size:15px;font-family:Consolas;color:#3F7F7F\">artifactId</span><span style=\"font-size:15px;font-family:Consolas;color:teal\">&gt;</span></p><p style=\"text-align:left;text-autospace:none\"><span style=\"font-size:15px;font-family: Consolas;color:black\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style=\"font-size:15px;font-family:Consolas;color:teal\">&lt;</span><span style=\"font-size:15px;font-family:Consolas;color:#3F7F7F\">version</span><span style=\"font-size:15px;font-family:Consolas;color:teal\">&gt;</span><span style=\"font-size:15px;font-family:Consolas;color:black\">3.3.3</span><span style=\"font-size:15px;font-family:Consolas;color:teal\">&lt;/</span><span style=\"font-size: 15px;font-family:Consolas;color:#3F7F7F\">version</span><span style=\"font-size:15px;font-family:Consolas;color:teal\">&gt;</span></p><p><span style=\"font-size:15px;font-family:Consolas;color:black\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style=\"font-size:15px;font-family:Consolas;color:teal\">&lt;/</span><span style=\"font-size:15px;font-family:Consolas;color:#3F7F7F\">dependency</span><span style=\"font-size:15px;font-family:Consolas;color:teal\">&gt;</span></p><p><span style=\"font-size:15px;font-family:Consolas;color:teal\">Java</span><span style=\"font-size:15px;font-family:宋体;color:teal\">代码使用</span></p><p style=\"text-align:left;text-autospace:none\"><span style=\"font-size:15px;font-family: Consolas;color:black;background:lightgrey;background:lightgrey\">AttributePrincipal</span> <span style=\"font-size:15px;font-family:Consolas;color:#6A3E3E\">principal</span><span style=\"font-size:15px;font-family:Consolas;color:black\"> = (<span style=\"background:lightgrey;background:lightgrey\">AttributePrincipal</span>)</span><span style=\"font-size:15px;font-family:Consolas;color:#6A3E3E\">request</span><span style=\"font-size:15px;font-family:Consolas;color:black\">.getUserPrincipal();</span></p><p style=\"text-align:left;text-autospace:none\"><span style=\"font-size:15px;font-family: Consolas\">principal.getAttributes()</span><span style=\"font-size:15px;font-family:宋体\">中进行获取</span></p><p><span style=\"font-size:15px;font-family:Consolas;color:black\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span>&nbsp;</span>System.</span><strong><em><span style=\"font-size:15px;font-family:Consolas;color:#0000C0\">out</span></em></strong><span style=\"font-size:15px;font-family: Consolas;color:black\">.println(</span><span style=\"font-size:15px;font-family:Consolas;color:#6A3E3E\">principal</span><span style=\"font-size:15px;font-family:Consolas;color:black\">.getAttributes().size())</span></p><p><span style=\"font-size:15px;font-family:Consolas;color:black\">&nbsp;</span></p><p><br/></p>";
            System.out.println(value.length());
            Document document = new Document("title", "MongoDB").
                    append("description", "database").
                    append("likes", 100).
                    append("by", value);
            List<Document> documents = new ArrayList<Document>();
            documents.add(document);
//            collection.insertMany(documents);
            System.out.println("文档插入成功");
            FindIterable<Document> findIterable = collection.find();
            MongoCursor<Document> mongoCursor = findIterable.iterator();
            while(mongoCursor.hasNext()){
                Document doc  = mongoCursor.next();
                System.out.println( doc.getString("by"));
            }
        } catch (Exception e) {
            System.err.println(e.getClass().getName() + ": " + e.getMessage());
        }
    }
}